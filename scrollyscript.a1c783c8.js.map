{"version":3,"sources":["scripts/scrollyscript.js"],"names":["layers","nycBase","d3","selectAll","manhattanBase","cb9Outline","neighborhoods","manhattanville","hamilton","morningside","columbia","labels","cb9","manhattan","reset","classed","Object","values","forEach","sel","zoomManhattan","fadeCB9","zoomCB9","showMorningside","showManhattanville","showHamilton","showAll","showColumbia","scroller","scrollama","steps","id","action","select","on","setup","step","offset","debug","onStepEnter","element","direction","dispatchEvent","CustomEvent","detail","onStepExit","window","addEventListener","resize"],"mappings":"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","file":"scrollyscript.a1c783c8.js","sourceRoot":"../src","sourcesContent":["const layers = {\n    // Base maps\n    nycBase: d3.selectAll('[class*=\"nyc-img\"]'),\n    manhattanBase: d3.selectAll('[class*=\"manhattan-img\"]'),\n\n    // Neighborhood outlines/images\n    cb9Outline: d3.selectAll('[class*=\"cb9-img\"]'),\n    neighborhoods: d3.selectAll('[class*=\"neighborhoods-img\"]'),\n    manhattanville: d3.selectAll('[class*=\"manhattanville-img\"]'),\n    hamilton: d3.selectAll('[class*=\"hamilton-img\"]'),\n    morningside: d3.selectAll('[class*=\"morningside-img\"]'),\n    columbia: d3.selectAll('[class*=\"columbia-img\"]'),\n\n    // Labels\n    labels: {\n        cb9: d3.selectAll(\".g-cb9\"),\n        manhattan: d3.selectAll(\".g-manhattan\"),\n        manhattanville: d3.selectAll(\".g-manhattanville\"),\n        hamilton: d3.selectAll(\".g-hamilton\"),\n        morningside: d3.selectAll(\".g-morningside\"),\n        columbia: d3.selectAll(\".g-columbia\"),\n    }\n};\n\n\n// ---- Helper functions ----\nfunction reset() {\n    // Show only the NYC base map\n    layers.nycBase.classed(\"hidden\", false).classed(\"zoom\", false);\n\n    // Hide all other image layers\n    layers.manhattanBase.classed(\"hidden\", true).classed(\"zoom\", false);\n    layers.cb9Outline.classed(\"hidden\", true);\n    layers.neighborhoods.classed(\"hidden\", true);\n    layers.manhattanville.classed(\"hidden\", true);\n    layers.hamilton.classed(\"hidden\", true);\n    layers.morningside.classed(\"hidden\", true);\n    layers.columbia.classed(\"hidden\", true);\n\n    // Hide all labels\n    Object.values(layers.labels).forEach(sel => sel.classed(\"hidden\", true));\n}\n\n\nfunction zoomManhattan() {\n    layers.nycBase.classed(\"hidden\", true);\n\n    layers.labels.manhattan.classed(\"hidden\", false);\n    layers.manhattanBase.classed(\"hidden\", false).classed(\"fade_out\", false);\n\n    layers.labels.cb9.classed(\"hidden\", true);\n    layers.cb9Outline.classed(\"hidden\", true);\n}\n\nfunction fadeCB9() {\n    // layers.manhattanBase.classed(\"fade_out\", true);\n    layers.manhattanBase.classed(\"hidden\", true);\n    layers.labels.manhattan.classed(\"hidden\", true);\n\n    layers.labels.cb9.classed(\"hidden\", false);\n    layers.cb9Outline.classed(\"hidden\", false);\n    layers.cb9Outline.classed(\"fade_out\", false);\n\n    layers.neighborhoods.classed(\"hidden\", true);\n\n    layers.labels.morningside.classed(\"hidden\", true);\n    layers.morningside.classed(\"hidden\", true);\n}\n\nfunction zoomCB9() {\n    layers.cb9Outline.classed(\"fade_out\", true);\n    layers.cb9Outline.classed(\"hidden\", true);\n\n    layers.labels.cb9.classed(\"hidden\", true);\n    layers.neighborhoods.classed(\"hidden\", false);\n    layers.morningside.classed(\"hidden\", true);\n}\n\nfunction showMorningside() {\n    zoomCB9();\n    layers.labels.morningside.classed(\"hidden\", false);\n    layers.morningside.classed(\"hidden\", false);\n\n    layers.columbia.classed(\"hidden\", true);\n\n    layers.manhattanville.classed(\"hidden\", true);\n    layers.labels.manhattanville.classed(\"hidden\", true);\n}\n\nfunction showManhattanville() {\n    layers.manhattanville.classed(\"hidden\", false);\n    layers.labels.manhattanville.classed(\"hidden\", false);\n\n    layers.morningside.classed(\"hidden\", true);\n    layers.labels.morningside.classed(\"hidden\", true);\n\n    layers.hamilton.classed(\"hidden\", true);\n    layers.labels.hamilton.classed(\"hidden\", true);\n\n}\n\nfunction showHamilton() {\n    layers.hamilton.classed(\"hidden\", false);\n    layers.labels.hamilton.classed(\"hidden\", false);\n\n    layers.manhattanville.classed(\"hidden\", true);\n    layers.labels.manhattanville.classed(\"hidden\", true);\n\n    layers.labels.morningside.classed(\"hidden\", true);\n    layers.morningside.classed(\"hidden\", true);\n}\n\nfunction showAll() {\n    layers.labels.morningside.classed(\"hidden\", false);\n    layers.morningside.classed(\"hidden\", false);\n\n    layers.manhattanville.classed(\"hidden\", false);\n    layers.labels.manhattanville.classed(\"hidden\", false);\n\n    layers.hamilton.classed(\"hidden\", false);\n    layers.labels.hamilton.classed(\"hidden\", false);\n\n    layers.columbia.classed(\"hidden\", true);\n    layers.labels.columbia.classed(\"hidden\", true);\n}\n\nfunction showColumbia() {\n    layers.columbia.classed(\"hidden\", false);\n    layers.labels.columbia.classed(\"hidden\", false);\n}\n\n// ---- Scrollama setup ----\nconst scroller = scrollama();\n\n// Bind scroll steps\nconst steps = [\n    { id: \"#step-0\", action: reset },\n    { id: \"#step-1\", action: zoomManhattan },\n    { id: \"#step-4\", action: zoomManhattan },\n    { id: \"#step-5\", action: fadeCB9 },\n    { id: \"#step-5a\", action: showMorningside },\n    { id: \"#step-6\", action: showManhattanville },\n    { id: \"#step-10\", action: showManhattanville },\n    { id: \"#step-11\", action: showHamilton },\n    { id: \"#step-13\", action: showAll },\n    { id: \"#step-22\", action: showAll },\n    { id: \"#step-23\", action: showColumbia },\n];\n\nreset()\n\nsteps.forEach(({ id, action }) => {\n    d3.select(id).on(\"stepin\", action);\n});\n\n\nscroller\n    .setup({\n        step: \"#scrolly .scrolly-overlay .step\",\n        offset: 0.5,\n        debug: false\n    })\n    .onStepEnter(({ element, direction }) => {\n        element.dispatchEvent(new CustomEvent(\"stepin\", { detail: { direction } }));\n    })\n    .onStepExit(({ element, direction }) => {\n        element.dispatchEvent(new CustomEvent(\"stepout\", { detail: { direction } }));\n    });\n\nwindow.addEventListener(\"resize\", scroller.resize);\n"]}